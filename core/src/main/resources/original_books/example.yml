# 附魔台可附魔物品配置, 请不要在尝试多个文件内配置相同的物品;
hooked-plugin: "vanilla"
hooked-id: "book"

# 当物品放入附魔台时, 会模拟计算出原版附魔台的附魔结果;
# 你有多种抽奖策略可以选择:

# "VANILLA" -> 原版策略, 按照原版的抽取方法抽取魔咒;
# 在原版附魔台中, 魔咒结果是根据 "物品附魔力", "物品可能出现的魔咒列表", "书架数量", "附魔种子" 等进行计算;
# 此方案兼容数据包, 但不一定兼容如ECO等插件, 可能会出现如ECO插件的魔咒无法被抽到的问题;
# 这是ECO等魔咒插件的问题, 他们修改了魔咒的属性, 并没有完全遵循原版的规则;
# 提示!!: 原版策略里附魔结果会被物品组件 minecraft:enchantable 的值影响, 记得给你的物品组件上添加合适的值, 如果物品没有这个组件可能无法抽取到魔咒!

# "CUSTOM" -> 自定义策略, 你需要设置每个魔咒在不同栏位出现的概率;
# 这个方案在配置上会比较麻烦, 但是自由度是最高的, 你可以完全捏出一份只能出某个魔咒的附魔书;
# 如果你在原版策略上出现了问题, 建议切换到此方案自行设置;
roll-strategy: "VANILLA"



# 仅 "roll-strategy" 值为 "VANILLA" 时生效;
# 可能出现的魔咒列表 -> 可以选择模拟某个物品的结果列表, 例如 铁斧, 书, 三叉戟 等;
# 当然也可以选择自行设置魔咒列表;
vanilla-enchantments:
  # 导入来自其他物品上的魔咒, 例如填写 "iron_axe" 代表将在附魔台上铁斧能够出现的所有魔咒都导入到书的魔咒随机池里;
  # 当你想要让这个物品模拟原版的物品附魔时很有用;
  # 但是记得它不会继承这个物品的附魔力, 你仍然需要为你的附魔物品添加附魔力组件;
  import:
    - "iron_axe"
  # 导入指定的魔咒, 例如填写 "minecraft:mending" 代表导入经验修补, 这样这个附魔书就可以在附魔台中有概率抽到经验修补了!
  enchantments:
    - "minecraft:mending"



# 仅 "roll-strategy" 值为 "CUSTOM" 时生效;
custom-enchantments:
  # 附魔台一共有3行, 这是自定义第一行的情况;
  first-line:
    # 产出的附魔书的失败率区间, 设置的值只能于0~100, 且max必须大于等于min;
    min-failure: 50
    max-failure: 90
    possible-enchantments: &possible
      - key: "minecraft:mending"
        # 权重, 代表附魔出现的概率; 你可以填写一个表达式, 插件提供一些预设的变量:
        # {enchantable} -> 物品的附魔力
        # {bookshelf} -> 附近书架数量
        # %任意PAPI% -> 自动解析值
        weight: 10
        min-level: 1 # 可选项, 当出现这个魔咒时, 最小出现的等级;
        max-level: 1 # 可选项, 当出现这个魔咒时, 最大出现的等级;
        min-failure: 50 # 可选项, 如果这里设置了, 就会覆盖上面的设置值;
        max-failure: 20 # 可选项, 如果这里设置了, 就会覆盖上面的设置值;

  second-line:
    min-failure: 40
    max-failure: 80
    <<: *possible # 沿用first的配置

  third-line:
    min-failure: 20
    max-failure: 60
    <<: *possible